{"ast":null,"code":"import _objectSpread from\"C:/Users/DavorDimeski/OneDrive - ITSM SOLUTIONS AND INTEGRATIONS DOO/Documents/GitHub/NARUCIVANJE/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import\"bootstrap/dist/css/bootstrap.min.css\";import React,{useState,useEffect}from\"react\";import{jwtDecode}from\"jwt-decode\";import NavBar from\"../components/NavBar\";import Table from\"../components/Table\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminObroci=()=>{const columns=[\"Naziv\",\"Slika\",\"Opis\",\"Status\"];const[data,setData]=useState([]);const[selectedObrok,setSelectedObrok]=useState(null);const[modalOpen,setModalOpen]=useState(false);const[editMode,setEditMode]=useState(false);const[obrokForm,setObrokForm]=useState({naziv:\"\",opis:\"\",slika:null// Slika će biti fajl\n});const token=localStorage.getItem(\"token\");const decodedToken=jwtDecode(token);const fetchObroci=async()=>{try{if(!token){console.error(\"Nema tokena, preusmeravanje na login...\");return;}const response=await fetch(\"https://narucivanje-back.naruci.co.rs:8443/api/v1/obrok/get/all\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}});if(!response.ok)throw new Error(\"Greška pri učitavanju podataka\");const result=await response.json();const formattedData=result.map(obrok=>({id:obrok.id,naziv:obrok.naziv,slika:/*#__PURE__*/_jsx(\"img\",{src:\"https://narucivanje-back.naruci.co.rs:8443/api/v1/obrok/image/\".concat(obrok.id,\"?t=\").concat(new Date().getTime()),alt:\"Slika obroka\",style:{width:45,height:45,objectFit:\"cover\",borderRadius:\"5px\"}}),opis:obrok.opis,status:obrok.status?\"aktivan\":\"neaktivan\"}));setData(formattedData);}catch(error){console.error(\"Greška pri dohvaćanju podataka:\",error);}};useEffect(()=>{fetchObroci();},[]);const handleRowClick=obrok=>{setSelectedObrok((selectedObrok===null||selectedObrok===void 0?void 0:selectedObrok.id)===obrok.id?null:obrok);};const toggleObrokStatus=async()=>{if(!token||!selectedObrok){console.error(\"Nema tokena ili obrok nije selektovan.\");return;}const newStatus=selectedObrok.status===\"aktivan\"?false:true;try{await fetch(\"https://narucivanje-back.naruci.co.rs:8443/api/v1/obrok/update/\".concat(selectedObrok.id),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)},body:JSON.stringify({naziv:selectedObrok.naziv,opis:selectedObrok.opis,status:newStatus,userId:decodedToken.id})});alert(\"Status obroka ažuriran!\");fetchObroci();}catch(error){console.error(\"Greška pri ažuriranju statusa:\",error);}};// ✅ Dodavanje/Izmena\nconst openModal=function(){let edit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;setEditMode(edit);if(edit&&selectedObrok){setObrokForm({naziv:selectedObrok.naziv,opis:selectedObrok.opis,slika:null// Ne učitavamo staru sliku jer je na serveru\n});}else{setObrokForm({naziv:\"\",opis:\"\",slika:null});}setModalOpen(true);};const handleChange=e=>{const{name,value}=e.target;setObrokForm(prevState=>_objectSpread(_objectSpread({},prevState),{},{[name]:value}));};const handleFileChange=e=>{if(e.target.files.length>0){setObrokForm(prevState=>_objectSpread(_objectSpread({},prevState),{},{slika:e.target.files[0]// Slika se čuva kao fajl objekat\n}));}};const handleSave=async()=>{if(!obrokForm.naziv||!obrokForm.opis){alert(\"Sva polja su obavezna!\");return;}const method=editMode?\"PUT\":\"POST\";const url=editMode?\"https://narucivanje-back.naruci.co.rs:8443/api/v1/obrok/update/\".concat(selectedObrok.id):\"https://narucivanje-back.naruci.co.rs:8443/api/v1/obrok/create\";try{// **Prvi korak**: Kreiramo obrok BEZ slike (ako postoji)\nconst obrokResponse=await fetch(url,{method,headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)},body:JSON.stringify({naziv:obrokForm.naziv,opis:obrokForm.opis,status:editMode?selectedObrok.status===\"aktivan\"?true:false:true,userId:decodedToken.id})});if(!obrokResponse.ok)throw new Error(\"Greška pri kreiranju/izmeni obroka\");const obrokData=await obrokResponse.json();// Backend vraća kreirani obrok\n// **Drugi korak**: Ako postoji nova slika, šaljemo je odvojeno\nif(obrokForm.slika){const formData=new FormData();formData.append(\"file\",obrokForm.slika);const slikaResp=await fetch(\"https://narucivanje-back.naruci.co.rs:8443/api/v1/obrok/upload-image/\".concat(obrokData.id),{method:\"POST\",headers:{\"Authorization\":\"Bearer \".concat(token)},body:formData});if(slikaResp.status===403){alert(\"Slika je previse velika, redukujte velicinu na 1000x1000 i probajte ponovo!\");return;}}alert(editMode?\"Obrok ažuriran!\":\"Novi obrok dodat!\");setModalOpen(false);fetchObroci();}catch(error){console.error(\"Greška pri čuvanju obroka:\",error);}};const[rowsPerPage,setRowsPerPage]=useState(7);// Prilagođavanje broja redova na osnovu veličine ekrana\nuseEffect(()=>{const handleResize=()=>{if(window.innerWidth<950||window.innerHeight<800){setRowsPerPage(4);// Na manjim ekranima prikazujemo manje redova\n}else{setRowsPerPage(6);// Na većim ekranima prikazujemo više redova\n}};window.addEventListener(\"resize\",handleResize);handleResize();return()=>window.removeEventListener(\"resize\",handleResize);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column\",style:{minHeight:\"100vh\"},children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-grow-1 align-items-stretch p-4\",style:{height:\"calc(100vh - 70px)\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 m-4 shadow-lg text-center d-flex flex-column justify-content-start align-items-center\",style:{borderRadius:\"20px\",backgroundColor:\"#486F5B\",width:\"320px\",height:\"90%\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn mb-4 fw-bold w-100 mt-4\",style:{backgroundColor:\"#CDDFD0\",fontFamily:\"Montserrat\",fontSize:15,color:\"#486F5B\"},onClick:()=>openModal(false),children:\"Dodaj novi obrok\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn mb-4 fw-bold w-100\",style:{backgroundColor:\"#CDDFD0\",fontFamily:\"Montserrat\",fontSize:15,color:\"#486F5B\"},onClick:()=>selectedObrok&&openModal(true),disabled:!selectedObrok,children:\"Izmeni selektovan obrok\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn fw-bold w-100\",style:{backgroundColor:\"#CDDFD0\",fontFamily:\"Montserrat\",fontSize:15,color:\"#486F5B\"},onClick:toggleObrokStatus,disabled:!selectedObrok,children:\"Aktiviraj / Deaktiviraj obrok\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container flex-grow-1 d-flex flex-column \",style:{height:\"90%\"},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"fw-bold mb-4 mt-3\",style:{fontFamily:\"Montserrat\",fontSize:27,color:\"#424242\"},children:\"Lista obroka\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"calc(100% - 10px)\"},children:/*#__PURE__*/_jsx(Table,{columns:columns,data:data,rowsPerPage:rowsPerPage,onRowClick:handleRowClick,selected:selectedObrok})})]}),modalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setModalOpen(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content align-items-center\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"fw-bold  mb-5\",style:{fontFamily:\"Montserrat\",fontSize:32,color:\"white\"},children:editMode?\"Izmeni obrok\":\"Dodaj obrok\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"naziv\",className:\"w-75  mb-3\",style:{fontFamily:\"Montserrat\",fontSize:14},value:obrokForm.naziv,onChange:handleChange,placeholder:\"Naziv\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"opis\",className:\"w-75  mb-3\",style:{fontFamily:\"Montserrat\",fontSize:14},value:obrokForm.opis,onChange:handleChange,placeholder:\"Opis\"}),/*#__PURE__*/_jsx(\"input\",{className:\"w-75  mb-3\",style:{fontFamily:\"Montserrat\",fontSize:14},type:\"file\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"button\",{className:\"btn mb-3 w-75 fw-bold \",style:{backgroundColor:\"#CDDFD0\",fontFamily:\"Montserrat\",fontSize:16,color:\"#486F5B\"},onClick:handleSave,children:\"Sa\\u010Duvaj\"})]})})]})]});};export default AdminObroci;","map":{"version":3,"names":["React","useState","useEffect","jwtDecode","NavBar","Table","jsx","_jsx","jsxs","_jsxs","AdminObroci","columns","data","setData","selectedObrok","setSelectedObrok","modalOpen","setModalOpen","editMode","setEditMode","obrokForm","setObrokForm","naziv","opis","slika","token","localStorage","getItem","decodedToken","fetchObroci","console","error","response","fetch","method","headers","concat","ok","Error","result","json","formattedData","map","obrok","id","src","Date","getTime","alt","style","width","height","objectFit","borderRadius","status","handleRowClick","toggleObrokStatus","newStatus","body","JSON","stringify","userId","alert","openModal","edit","arguments","length","undefined","handleChange","e","name","value","target","prevState","_objectSpread","handleFileChange","files","handleSave","url","obrokResponse","obrokData","formData","FormData","append","slikaResp","rowsPerPage","setRowsPerPage","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","className","minHeight","children","backgroundColor","fontFamily","fontSize","color","onClick","disabled","onRowClick","selected","stopPropagation","type","onChange","placeholder"],"sources":["C:/Users/DavorDimeski/OneDrive - ITSM SOLUTIONS AND INTEGRATIONS DOO/Documents/GitHub/NARUCIVANJE/src/pages/AdminObroci.js"],"sourcesContent":["import \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport NavBar from \"../components/NavBar\";\r\nimport Table from \"../components/Table\";\r\n\r\nconst AdminObroci = () => {\r\n    const columns = [\"Naziv\", \"Slika\", \"Opis\", \"Status\"];\r\n    const [data, setData] = useState([]);\r\n    const [selectedObrok, setSelectedObrok] = useState(null);\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [editMode, setEditMode] = useState(false);\r\n    const [obrokForm, setObrokForm] = useState({\r\n        naziv: \"\",\r\n        opis: \"\",\r\n        slika: null, // Slika će biti fajl\r\n    });\r\n    const token = localStorage.getItem(\"token\");\r\n    const decodedToken = jwtDecode(token);\r\n\r\n    const fetchObroci = async () => {\r\n        try {\r\n            if (!token) {\r\n                console.error(\"Nema tokena, preusmeravanje na login...\");\r\n                return;\r\n            }\r\n            const response = await fetch(\"https://narucivanje-back.naruci.co.rs:8443/api/v1/obrok/get/all\", {\r\n                method: \"GET\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": `Bearer ${token}`\r\n                }\r\n            });\r\n            if (!response.ok) throw new Error(\"Greška pri učitavanju podataka\");\r\n\r\n            const result = await response.json();\r\n            const formattedData = result.map(obrok => ({\r\n                id: obrok.id,\r\n                naziv: obrok.naziv,\r\n                slika: <img src={`https://narucivanje-back.naruci.co.rs:8443/api/v1/obrok/image/${obrok.id}?t=${new Date().getTime()}`}\r\n                    alt=\"Slika obroka\" style={{ width: 45, height: 45, objectFit: \"cover\", borderRadius: \"5px\" }} />,\r\n                opis: obrok.opis,\r\n                status: obrok.status ? \"aktivan\" : \"neaktivan\",\r\n            }));\r\n            setData(formattedData);\r\n        } catch (error) {\r\n            console.error(\"Greška pri dohvaćanju podataka:\", error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchObroci();\r\n    }, []);\r\n\r\n    const handleRowClick = (obrok) => {\r\n        setSelectedObrok(selectedObrok?.id === obrok.id ? null : obrok);\r\n    };\r\n\r\n    const toggleObrokStatus = async () => {\r\n        if (!token || !selectedObrok) {\r\n            console.error(\"Nema tokena ili obrok nije selektovan.\");\r\n            return;\r\n        }\r\n\r\n        const newStatus = selectedObrok.status === \"aktivan\" ? false : true;\r\n\r\n        try {\r\n            await fetch(`https://narucivanje-back.naruci.co.rs:8443/api/v1/obrok/update/${selectedObrok.id}`, {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({\r\n                    naziv: selectedObrok.naziv,\r\n                    opis: selectedObrok.opis,\r\n                    status: newStatus,\r\n                    userId: decodedToken.id\r\n                })\r\n            });\r\n\r\n            alert(\"Status obroka ažuriran!\");\r\n            fetchObroci();\r\n        } catch (error) {\r\n            console.error(\"Greška pri ažuriranju statusa:\", error);\r\n        }\r\n    };\r\n\r\n    // ✅ Dodavanje/Izmena\r\n    const openModal = (edit = false) => {\r\n        setEditMode(edit);\r\n        if (edit && selectedObrok) {\r\n            setObrokForm({\r\n                naziv: selectedObrok.naziv,\r\n                opis: selectedObrok.opis,\r\n                slika: null // Ne učitavamo staru sliku jer je na serveru\r\n            });\r\n        } else {\r\n            setObrokForm({\r\n                naziv: \"\",\r\n                opis: \"\",\r\n                slika: null\r\n            });\r\n        }\r\n        setModalOpen(true);\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setObrokForm(prevState => ({\r\n            ...prevState,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const handleFileChange = (e) => {\r\n        if (e.target.files.length > 0) {\r\n            setObrokForm(prevState => ({\r\n                ...prevState,\r\n                slika: e.target.files[0] // Slika se čuva kao fajl objekat\r\n            }));\r\n        }\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        if (!obrokForm.naziv || !obrokForm.opis) {\r\n            alert(\"Sva polja su obavezna!\");\r\n            return;\r\n        }\r\n\r\n        const method = editMode ? \"PUT\" : \"POST\";\r\n        const url = editMode\r\n            ? `https://narucivanje-back.naruci.co.rs:8443/api/v1/obrok/update/${selectedObrok.id}`\r\n            : \"https://narucivanje-back.naruci.co.rs:8443/api/v1/obrok/create\";\r\n\r\n        try {\r\n            // **Prvi korak**: Kreiramo obrok BEZ slike (ako postoji)\r\n            const obrokResponse = await fetch(url, {\r\n                method,\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({\r\n                    naziv: obrokForm.naziv,\r\n                    opis: obrokForm.opis,\r\n                    status: editMode ? (selectedObrok.status === \"aktivan\" ? true : false) : true,\r\n                    userId: decodedToken.id\r\n                })\r\n            });\r\n\r\n            if (!obrokResponse.ok) throw new Error(\"Greška pri kreiranju/izmeni obroka\");\r\n\r\n            const obrokData = await obrokResponse.json(); // Backend vraća kreirani obrok\r\n\r\n            // **Drugi korak**: Ako postoji nova slika, šaljemo je odvojeno\r\n            if (obrokForm.slika) {\r\n                const formData = new FormData();\r\n                formData.append(\"file\", obrokForm.slika);\r\n\r\n                const slikaResp=await fetch(`https://narucivanje-back.naruci.co.rs:8443/api/v1/obrok/upload-image/${obrokData.id}`, {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        \"Authorization\": `Bearer ${token}`\r\n                    },\r\n                    body: formData\r\n                });\r\n\r\n                if (slikaResp.status === 403) {\r\n                    alert(\"Slika je previse velika, redukujte velicinu na 1000x1000 i probajte ponovo!\");\r\n                    return;\r\n                }\r\n            }\r\n            alert(editMode ? \"Obrok ažuriran!\" : \"Novi obrok dodat!\");\r\n            setModalOpen(false);\r\n            fetchObroci();\r\n        } catch (error) {\r\n            console.error(\"Greška pri čuvanju obroka:\", error);\r\n        }\r\n    };\r\n\r\n    const [rowsPerPage, setRowsPerPage] = useState(7);\r\n\r\n    // Prilagođavanje broja redova na osnovu veličine ekrana\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            if (window.innerWidth < 950 || window.innerHeight < 800) {\r\n                setRowsPerPage(4); // Na manjim ekranima prikazujemo manje redova\r\n            } else {\r\n                setRowsPerPage(6); // Na većim ekranima prikazujemo više redova\r\n            }\r\n        };\r\n\r\n        window.addEventListener(\"resize\", handleResize);\r\n        handleResize();\r\n        return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"d-flex flex-column\" style={{ minHeight: \"100vh\" }} >\r\n            <NavBar />\r\n            <div className=\"d-flex flex-grow-1 align-items-stretch p-4\" style={{ height: \"calc(100vh - 70px)\" }}>\r\n\r\n                {/* Sidebar */}\r\n                <div className=\"p-3 m-4 shadow-lg text-center d-flex flex-column justify-content-start align-items-center\"\r\n                    style={{\r\n                        borderRadius: \"20px\", backgroundColor: \"#486F5B\", width: \"320px\",\r\n                        height: \"90%\"\r\n                    }}>\r\n                    <button className=\"btn mb-4 fw-bold w-100 mt-4\"\r\n                        style={{ backgroundColor: \"#CDDFD0\", fontFamily: \"Montserrat\", fontSize: 15, color: \"#486F5B\" }}\r\n                        onClick={() => openModal(false)}>\r\n                        Dodaj novi obrok</button>\r\n                    <button className=\"btn mb-4 fw-bold w-100\"\r\n                        style={{ backgroundColor: \"#CDDFD0\", fontFamily: \"Montserrat\", fontSize: 15, color: \"#486F5B\" }}\r\n                        onClick={() => selectedObrok && openModal(true)} disabled={!selectedObrok}>\r\n                        Izmeni selektovan obrok</button>\r\n                    <button className=\"btn fw-bold w-100\"\r\n                        style={{ backgroundColor: \"#CDDFD0\", fontFamily: \"Montserrat\", fontSize: 15, color: \"#486F5B\" }}\r\n                        onClick={toggleObrokStatus} disabled={!selectedObrok} >\r\n                        Aktiviraj / Deaktiviraj obrok</button>\r\n                </div>\r\n\r\n                {/* Glavni sadržaj */}\r\n                <div className=\"container flex-grow-1 d-flex flex-column \" style={{ height: \"90%\" }}>\r\n                    <h2 className=\"fw-bold mb-4 mt-3\" style={{ fontFamily: \"Montserrat\", fontSize: 27, color: \"#424242\" }}>Lista obroka</h2>\r\n                    <div style={{ height: \"calc(100% - 10px)\" }}>\r\n                        <Table columns={columns}\r\n                            data={data} rowsPerPage={rowsPerPage} onRowClick={handleRowClick} selected={selectedObrok} />\r\n                    </div>\r\n                </div>\r\n\r\n                {modalOpen && (\r\n                    <div className=\"modal-overlay\" onClick={() => setModalOpen(false)}>\r\n                        <div className=\"modal-content align-items-center\" onClick={(e) => e.stopPropagation()}>\r\n                            <h2 className=\"fw-bold  mb-5\" style={{ fontFamily: \"Montserrat\", fontSize: 32, color: \"white\" }}>{editMode ? \"Izmeni obrok\" : \"Dodaj obrok\"}</h2>\r\n                            <input type=\"text\" name=\"naziv\" className=\"w-75  mb-3\" style={{ fontFamily: \"Montserrat\", fontSize: 14 }}\r\n                                value={obrokForm.naziv} onChange={handleChange} placeholder=\"Naziv\" />\r\n                            <textarea name=\"opis\" className=\"w-75  mb-3\" style={{ fontFamily: \"Montserrat\", fontSize: 14 }}\r\n                                value={obrokForm.opis} onChange={handleChange} placeholder=\"Opis\"></textarea>\r\n                            <input className=\"w-75  mb-3\" style={{ fontFamily: \"Montserrat\", fontSize: 14 }}\r\n                                type=\"file\" onChange={handleFileChange} />\r\n                            <button className=\"btn mb-3 w-75 fw-bold \"\r\n                                style={{ backgroundColor: \"#CDDFD0\", fontFamily: \"Montserrat\", fontSize: 16, color: \"#486F5B\" }}\r\n                                onClick={handleSave}>Sačuvaj</button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AdminObroci;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}