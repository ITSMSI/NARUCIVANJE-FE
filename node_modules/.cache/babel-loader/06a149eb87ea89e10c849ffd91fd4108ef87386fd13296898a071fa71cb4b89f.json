{"ast":null,"code":"import\"bootstrap/dist/css/bootstrap.min.css\";import React,{useState}from\"react\";// Importuj useState\nimport{jwtDecode}from\"jwt-decode\";import{useNavigate}from\"react-router-dom\";// Importuj useNavigate\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=_ref=>{let{updateToken}=_ref;const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[errorMessage,setErrorMessage]=useState(\"\");const[poljaError,setPoljaError]=useState(\"\");const[emailError,setEmailError]=useState(\"\");// Za email grešku\n// Inicijalizacija navigate funkcije\nconst navigate=useNavigate();const emailRegex=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;// Regularni izraz za validaciju emaila\n// Funkcija koja se poziva kada se forma pošalje\nconst handleSubmit=async e=>{e.preventDefault();// Sprečava podrazumevano ponašanje forme\n// Resetovanje grešaka\nsetEmailError(\"\");setErrorMessage(\"\");setPoljaError(\"\");// Validacija emaila\nif(!email.match(emailRegex)){setEmailError(\"Unesite validnu email adresu.\");return;}if(!email||!password){setPoljaError(\"Sva polja moraju biti popunjena.\");return;}const userData={email:email,password:password};try{// Slanje POST zahteva ka backendu\nconst response=await fetch(\"http://127.0.0.1:8080/auth/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(userData)});if(response.ok){const data=await response.json();updateToken(data.token);const decodedToken=jwtDecode(data.token);// Preusmeravanje korisnika na stranicu za naručivanje\nif(decodedToken.role===\"ROLE_ADMIN\"){navigate(\"/admin\");}else{navigate(\"/meni\");}}else{const data=await response.json();setErrorMessage(data.message||\"Došlo je do greške pri prijavljivanju.\");// Ako nije uspešno, postavi grešku\n}}catch(error){console.error(\"Greška prilikom slanja:\",error);setErrorMessage(\"Vaš nalog trenutno nije aktivan.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\" vh-100 d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5 d-none d-md-block\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-100 bg-white opacity-75\",style:{backgroundImage:\"url('/slike/login.jpg')\",backgroundSize:\"cover\",backgroundPosition:\"center\"}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7 d-flex align-items-center justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-70\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center fw-bold\",style:{color:\"#424242\",fontFamily:\"Montserrat\",fontSize:28},children:\"Dobrodo\\u0161li!\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-center fw-bold mt-5\",style:{color:\"#424242\",fontFamily:\"Montserrat\",fontSize:28},children:\"Prijavite se da naru\\u010Dite\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mt-5\",style:{color:\"#9E9E9E\",fontFamily:\"Montserrat\",fontSize:18},children:[\"Zaboravili ste lozinku?\",\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/lozinka\"),className:\"btn p-0 fw-bold\",style:{color:\"#486F5B\",fontFamily:\"Montserrat\",fontSize:18,background:\"none\",border:\"none\"},children:\"Promenite je ovde\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-3\",style:{color:\"#9E9E9E\",fontFamily:\"Montserrat\",fontSize:18},children:\"_______________  ili nastavite  _______________\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 mt-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"Unesite va\\u0161 email\",style:{fontFamily:\"Montserrat\",fontSize:14,height:41},value:email,onChange:e=>setEmail(e.target.value)}),emailError&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:emailError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 \",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Unesite va\\u0161u lozinku\",style:{fontFamily:\"Montserrat\",fontSize:14,height:41},value:password,onChange:e=>setPassword(e.target.value)}),poljaError&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:poljaError})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn w-100 mb-5 fw-bold\",style:{backgroundColor:\"#486F5B\",color:\"white\",fontFamily:\"Montserrat\",fontSize:18},children:\"Prijavi se\"}),errorMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger mt-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Gre\\u0161ka: \"}),\" \",errorMessage]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/\"),className:\"btn w-100 p-0 fw-bold mt-5\",style:{color:\"#486F5B\",fontFamily:\"Montserrat\",fontSize:18,background:\"none\",border:\"none\"},children:\"\\u2190 Vrati se na po\\u010Detnu stranicu\"})]})})]});};export default LoginPage;","map":{"version":3,"names":["React","useState","jwtDecode","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginPage","_ref","updateToken","email","setEmail","password","setPassword","errorMessage","setErrorMessage","poljaError","setPoljaError","emailError","setEmailError","navigate","emailRegex","handleSubmit","e","preventDefault","match","userData","response","fetch","method","headers","body","JSON","stringify","ok","data","json","token","decodedToken","role","message","error","console","className","children","style","backgroundImage","backgroundSize","backgroundPosition","color","fontFamily","fontSize","onClick","background","border","onSubmit","type","placeholder","height","value","onChange","target","backgroundColor"],"sources":["D:/NARUCIVANJE-FE/src/pages/LoginPage.js"],"sourcesContent":["\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport React, { useState } from \"react\"; // Importuj useState\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport { useNavigate } from \"react-router-dom\"; // Importuj useNavigate\r\n\r\n\r\nconst LoginPage = ({updateToken}) => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [poljaError, setPoljaError] = useState(\"\");\r\n  const [emailError, setEmailError] = useState(\"\"); // Za email grešku\r\n\r\n  // Inicijalizacija navigate funkcije\r\n  const navigate = useNavigate();\r\n\r\n  const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/; // Regularni izraz za validaciju emaila\r\n\r\n\r\n  // Funkcija koja se poziva kada se forma pošalje\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault(); // Sprečava podrazumevano ponašanje forme\r\n\r\n    // Resetovanje grešaka\r\n    setEmailError(\"\");\r\n    setErrorMessage(\"\");\r\n    setPoljaError(\"\");\r\n\r\n    // Validacija emaila\r\n    if (!email.match(emailRegex)) {\r\n      setEmailError(\"Unesite validnu email adresu.\");\r\n      return;\r\n    }\r\n\r\n    if (!email || !password) {\r\n      setPoljaError(\"Sva polja moraju biti popunjena.\");\r\n      return;\r\n    }\r\n\r\n    const userData = {\r\n      email: email,\r\n      password: password,\r\n    };\r\n\r\n    try {\r\n      // Slanje POST zahteva ka backendu\r\n      const response = await fetch(\"http://127.0.0.1:8080/auth/login\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\", },\r\n        body: JSON.stringify(userData),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n\r\n        updateToken(data.token);\r\n        const decodedToken = jwtDecode(data.token);\r\n        // Preusmeravanje korisnika na stranicu za naručivanje\r\n        if (decodedToken.role === \"ROLE_ADMIN\") {\r\n          navigate(\"/admin\");\r\n        } else {\r\n          navigate(\"/meni\");\r\n        }\r\n      } else {\r\n        const data = await response.json();\r\n        setErrorMessage(data.message || \"Došlo je do greške pri prijavljivanju.\"); // Ako nije uspešno, postavi grešku\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Greška prilikom slanja:\", error);\r\n      setErrorMessage(\"Vaš nalog trenutno nije aktivan.\");\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\" vh-100 d-flex\">\r\n      {/* Leva strana */}\r\n      <div className=\"col-md-5 d-none d-md-block\">\r\n        <div\r\n          className=\"h-100 bg-white opacity-75\"\r\n          style={{ backgroundImage: \"url('/slike/login.jpg')\", backgroundSize: \"cover\", backgroundPosition: \"center\" }}></div>\r\n      </div>\r\n\r\n      {/* Desna strana */}\r\n      <div className=\"col-md-7 d-flex align-items-center justify-content-center\">\r\n        <div className=\"w-70\">\r\n          <h2 className=\"text-center fw-bold\" style={{ color: \"#424242\", fontFamily: \"Montserrat\", fontSize: 28 }}>Dobrodošli!</h2>\r\n          <h3 className=\"text-center fw-bold mt-5\" style={{ color: \"#424242\", fontFamily: \"Montserrat\", fontSize: 28 }}>Prijavite se da naručite</h3>\r\n\r\n          <p className=\"text-center mt-5\" style={{ color: \"#9E9E9E\", fontFamily: \"Montserrat\", fontSize: 18 }}>\r\n            Zaboravili ste lozinku?{\" \"}\r\n            <button\r\n              onClick={() => navigate(\"/lozinka\")}\r\n              className=\"btn p-0 fw-bold\"\r\n              style={{ color: \"#486F5B\", fontFamily: \"Montserrat\", fontSize: 18, background: \"none\", border: \"none\" }}\r\n            >\r\n              Promenite je ovde\r\n            </button>\r\n          </p>\r\n          <p className=\"text-center mt-3\" style={{ color: \"#9E9E9E\", fontFamily: \"Montserrat\", fontSize: 18 }}>\r\n            _______________  ili nastavite  _______________\r\n          </p>\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"mb-3 mt-4\">\r\n              <input type=\"email\" className=\"form-control\" placeholder=\"Unesite vaš email\"\r\n                style={{ fontFamily: \"Montserrat\", fontSize: 14, height: 41 }}\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n              />\r\n              {emailError && <div className=\"text-danger\">{emailError}</div>}\r\n            </div>\r\n            <div className=\"mb-3 \">\r\n              <input\r\n                type=\"password\" className=\"form-control\" placeholder=\"Unesite vašu lozinku\"\r\n                style={{ fontFamily: \"Montserrat\", fontSize: 14, height: 41 }}\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n              />\r\n              {poljaError && <div className=\"text-danger\">{poljaError}</div>}\r\n            </div>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn w-100 mb-5 fw-bold\"\r\n              style={{ backgroundColor: \"#486F5B\", color: \"white\", fontFamily: \"Montserrat\", fontSize: 18 }}>\r\n              Prijavi se\r\n            </button>\r\n            {errorMessage && (\r\n              <div className=\"alert alert-danger mt-3\">\r\n                <strong>Greška: </strong> {errorMessage}\r\n              </div>\r\n            )}\r\n          </form>\r\n\r\n          <button\r\n            onClick={() => navigate(\"/\")}\r\n            className=\"btn w-100 p-0 fw-bold mt-5\"\r\n            style={{ color: \"#486F5B\", fontFamily: \"Montserrat\", fontSize: 18, background: \"none\", border: \"none\" }} >\r\n            ← Vrati se na početnu stranicu\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}