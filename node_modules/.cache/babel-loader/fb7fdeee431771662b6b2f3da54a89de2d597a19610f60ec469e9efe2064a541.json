{"ast":null,"code":"import\"bootstrap/dist/css/bootstrap.min.css\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LozinkaPage=()=>{const[email,setEmail]=useState(\"\");const[errorMessage,setErrorMessage]=useState(\"\");const[emailError,setEmailError]=useState(\"\");const[poljaError,setPoljaError]=useState(\"\");const[isSubmitting,setIsSubmitting]=useState(false);const[successMessage,setSuccessMessage]=useState(\"\");const navigate=useNavigate();const emailRegex=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;const handleSubmit=async e=>{e.preventDefault();// Resetovanje grešaka\nsetEmailError(\"\");setErrorMessage(\"\");setPoljaError(\"\");// Validacija emaila\nif(!email.match(emailRegex)){setEmailError(\"Unesite validnu email adresu.\");return;}if(!email){setPoljaError(\"Sva polja moraju biti popunjena.\");return;}const userData={email:email};try{setIsSubmitting(true);// Slanje POST zahteva ka backendu\nconst response=await fetch(\"https://narucivanje-back.naruci.co.rs:8443/auth/forgot-password\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(userData)});// Just read the response as text and don't try to parse it as JSON\nconst responseText=await response.text();if(response.ok){// Successfully sent the password reset request\nsetSuccessMessage(\"Link za promenu lozinke je poslat na Vaš email, pratite uputstva!\");setEmail(\"\");// After 3 seconds, redirect to login\nsetTimeout(()=>{navigate(\"/login\");},3000);}else{// Something went wrong\nsetErrorMessage(\"Došlo je do greške pri slanju podataka.\");}}catch(error){console.error(\"Greška prilikom slanja:\",error);setErrorMessage(\"Došlo je do greške pri slanju podataka.\");}finally{setIsSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"vh-100 d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5 d-none d-md-block\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-100 bg-white opacity-75\",style:{backgroundImage:\"url('/slike/login.jpg')\",backgroundSize:\"cover\",backgroundPosition:\"center\"}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7 d-flex align-items-center justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-70\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center fw-bold\",style:{color:\"#424242\",fontFamily:\"Montserrat\",fontSize:28},children:\"Promena lozinke\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mt-5\",style:{color:\"#9E9E9E\",fontFamily:\"Montserrat\",fontSize:18},children:[\"Ve\\u0107 znate lozinku?\",\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/login\"),className:\"btn p-0 fw-bold\",style:{color:\"#486F5B\",fontFamily:\"Montserrat\",fontSize:18,background:\"none\",border:\"none\"},children:\"Prijavite se ovde\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-3\",style:{color:\"#9E9E9E\",fontFamily:\"Montserrat\",fontSize:18},children:\"_______________  ili nastavite  _______________\"}),successMessage?/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success mt-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-center mb-0\",children:successMessage}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center mb-0\",children:\"Bi\\u0107ete preusmereni na stranicu za prijavu...\"})]}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 mt-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"Unesite va\\u0161 email\",style:{fontFamily:\"Montserrat\",fontSize:14,height:41},value:email,onChange:e=>setEmail(e.target.value)}),emailError&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:emailError}),poljaError&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:poljaError})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn w-100 mb-5 fw-bold\",disabled:isSubmitting,style:{backgroundColor:\"#486F5B\",color:\"white\",fontFamily:\"Montserrat\",fontSize:18},children:isSubmitting?\"Slanje...\":\"Promeni lozinku\"}),errorMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger mt-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Gre\\u0161ka: \"}),\" \",errorMessage]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/\"),className:\"btn w-100 p-0 fw-bold mt-5\",style:{color:\"#486F5B\",fontFamily:\"Montserrat\",fontSize:18,background:\"none\",border:\"none\"},children:\"\\u2190 Vrati se na po\\u010Detnu stranicu\"})]})})]});};export default LozinkaPage;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","LozinkaPage","email","setEmail","errorMessage","setErrorMessage","emailError","setEmailError","poljaError","setPoljaError","isSubmitting","setIsSubmitting","successMessage","setSuccessMessage","navigate","emailRegex","handleSubmit","e","preventDefault","match","userData","response","fetch","method","headers","body","JSON","stringify","responseText","text","ok","setTimeout","error","console","className","children","style","backgroundImage","backgroundSize","backgroundPosition","color","fontFamily","fontSize","onClick","background","border","onSubmit","type","placeholder","height","value","onChange","target","disabled","backgroundColor"],"sources":["C:/Users/DavorDimeski/OneDrive - ITSM SOLUTIONS AND INTEGRATIONS DOO/Documents/GitHub/NARUCIVANJE/src/pages/LozinkaPage.js"],"sourcesContent":["import \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst LozinkaPage = () => {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n    const [emailError, setEmailError] = useState(\"\");\r\n    const [poljaError, setPoljaError] = useState(\"\");\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [successMessage, setSuccessMessage] = useState(\"\");\r\n    const navigate = useNavigate();\r\n    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        // Resetovanje grešaka\r\n        setEmailError(\"\");\r\n        setErrorMessage(\"\");\r\n        setPoljaError(\"\");\r\n        // Validacija emaila\r\n        if (!email.match(emailRegex)) {\r\n            setEmailError(\"Unesite validnu email adresu.\");\r\n            return;\r\n        }\r\n        if (!email) {\r\n            setPoljaError(\"Sva polja moraju biti popunjena.\");\r\n            return;\r\n        }\r\n        const userData = {\r\n            email: email,\r\n        };\r\n        try {\r\n            setIsSubmitting(true);\r\n            // Slanje POST zahteva ka backendu\r\n            const response = await fetch(\"https://narucivanje-back.naruci.co.rs:8443/auth/forgot-password\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(userData),\r\n            });\r\n            // Just read the response as text and don't try to parse it as JSON\r\n            const responseText = await response.text();\r\n            if (response.ok) {\r\n                // Successfully sent the password reset request\r\n                setSuccessMessage(\"Link za promenu lozinke je poslat na Vaš email, pratite uputstva!\");\r\n                setEmail(\"\");\r\n                // After 3 seconds, redirect to login\r\n                setTimeout(() => {\r\n                    navigate(\"/login\");\r\n                }, 3000);\r\n            } else {\r\n                // Something went wrong\r\n                setErrorMessage(\"Došlo je do greške pri slanju podataka.\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Greška prilikom slanja:\", error);\r\n            setErrorMessage(\"Došlo je do greške pri slanju podataka.\");\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"vh-100 d-flex\">\r\n            {/* Leva strana */}\r\n            <div className=\"col-md-5 d-none d-md-block\">\r\n                <div\r\n                    className=\"h-100 bg-white opacity-75\"\r\n                    style={{ backgroundImage: \"url('/slike/login.jpg')\", backgroundSize: \"cover\", backgroundPosition: \"center\" }}></div>\r\n            </div>\r\n            {/* Desna strana */}\r\n            <div className=\"col-md-7 d-flex align-items-center justify-content-center\">\r\n                <div className=\"w-70\">\r\n                    <h2 className=\"text-center fw-bold\" style={{ color: \"#424242\", fontFamily: \"Montserrat\", fontSize: 28 }}>Promena lozinke</h2>\r\n                    <p className=\"text-center mt-5\" style={{ color: \"#9E9E9E\", fontFamily: \"Montserrat\", fontSize: 18 }}>\r\n                        Već znate lozinku?{\" \"}\r\n                        <button\r\n                            onClick={() => navigate(\"/login\")}\r\n                            className=\"btn p-0 fw-bold\"\r\n                            style={{ color: \"#486F5B\", fontFamily: \"Montserrat\", fontSize: 18, background: \"none\", border: \"none\" }}\r\n                        >\r\n                            Prijavite se ovde\r\n                        </button>\r\n                    </p>\r\n                    <p className=\"text-center mt-3\" style={{ color: \"#9E9E9E\", fontFamily: \"Montserrat\", fontSize: 18 }}>\r\n                        _______________  ili nastavite  _______________\r\n                    </p>\r\n                    {successMessage ? (\r\n                        <div className=\"alert alert-success mt-4\">\r\n                            <p className=\"text-center mb-0\">{successMessage}</p>\r\n                            <p className=\"text-center mb-0\">Bićete preusmereni na stranicu za prijavu...</p>\r\n                        </div>\r\n                    ) : (\r\n                        <form onSubmit={handleSubmit}>\r\n                            <div className=\"mb-3 mt-4\">\r\n                                <input\r\n                                    type=\"email\"\r\n                                    className=\"form-control\"\r\n                                    placeholder=\"Unesite vaš email\"\r\n                                    style={{ fontFamily: \"Montserrat\", fontSize: 14, height: 41 }}\r\n                                    value={email}\r\n                                    onChange={(e) => setEmail(e.target.value)}\r\n                                />\r\n                                {emailError && <div className=\"text-danger\">{emailError}</div>}\r\n                                {poljaError && <div className=\"text-danger\">{poljaError}</div>}\r\n                            </div>\r\n                            <button\r\n                                type=\"submit\"\r\n                                className=\"btn w-100 mb-5 fw-bold\"\r\n                                disabled={isSubmitting}\r\n                                style={{ backgroundColor: \"#486F5B\", color: \"white\", fontFamily: \"Montserrat\", fontSize: 18 }}>\r\n                                {isSubmitting ? \"Slanje...\" : \"Promeni lozinku\"}\r\n                            </button>\r\n                            {errorMessage && (\r\n                                <div className=\"alert alert-danger mt-3\">\r\n                                    <strong>Greška: </strong> {errorMessage}\r\n                                </div>\r\n                            )}\r\n                        </form>\r\n                    )}\r\n                    <button\r\n                        onClick={() => navigate(\"/\")}\r\n                        className=\"btn w-100 p-0 fw-bold mt-5\"\r\n                        style={{ color: \"#486F5B\", fontFamily: \"Montserrat\", fontSize: 18, background: \"none\", border: \"none\" }} >\r\n                        ← Vrati se na početnu stranicu\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default LozinkaPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}