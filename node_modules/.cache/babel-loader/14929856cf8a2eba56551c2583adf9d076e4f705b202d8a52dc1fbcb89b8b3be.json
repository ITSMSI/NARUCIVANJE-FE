{"ast":null,"code":"// src/App.js\nimport{BrowserRouter as Router,Route,Routes}from\"react-router-dom\";import React,{useState,useEffect}from\"react\";import{jwtDecode}from\"jwt-decode\";import HomePage from\"./pages/HomePage\";import LoginPage from\"./pages/LoginPage\";import LozinkaPage from\"./pages/LozinkaPage\";import PromenaLozinke from\"./pages/PromenaLozinke\";import MeniPage from\"./pages/MeniPage\";import PregledPage from\"./pages/PregledPage\";import AdminPregled from\"./pages/AdminPregled\";import AdminKorisnici from\"./pages/AdminKorisnici\";import AdminMeniji from\"./pages/AdminMeniji\";import AdminObroci from\"./pages/AdminObroci\";import AdminRole from\"./pages/AdminRole\";import AdminLokacije from\"./pages/AdminLokacije\";import AdminKompanije from\"./pages/AdminKompanije\";import NotAuthorizedPage from\"./pages/NotAuthorizedPage\";import NePostojiPage from\"./pages/NePostojiPage\";import ProtectedRoute from\"./components/ProtectedRoute\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[token,setToken]=useState(localStorage.getItem(\"token\")||null);const[userRole,setUserRole]=useState(\"\");useEffect(()=>{const savedRole=localStorage.getItem(\"role\");if(savedRole){setUserRole(savedRole);}else if(token){try{const decoded=jwtDecode(token);const role=decoded.role||\"\";setUserRole(role);localStorage.setItem(\"role\",role);}catch(e){setUserRole(\"\");}}else{setUserRole(\"\");}},[token]);const updateToken=newToken=>{if(newToken){localStorage.setItem(\"token\",newToken);}else{localStorage.removeItem(\"token\");localStorage.removeItem(\"role\");}setToken(newToken);};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPage,{updateToken:updateToken})}),/*#__PURE__*/_jsx(Route,{path:\"/lozinka\",element:/*#__PURE__*/_jsx(LozinkaPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/promena-lozinke\",element:/*#__PURE__*/_jsx(PromenaLozinke,{})}),/*#__PURE__*/_jsx(Route,{path:\"/meni\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['ROLE_USER'],userRole:userRole,children:/*#__PURE__*/_jsx(MeniPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/pregled\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['ROLE_USER'],userRole:userRole,children:/*#__PURE__*/_jsx(PregledPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['ROLE_ADMIN'],userRole:userRole,children:/*#__PURE__*/_jsx(AdminPregled,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/meniji\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['ROLE_ADMIN'],userRole:userRole,children:/*#__PURE__*/_jsx(AdminMeniji,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/obroci\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['ROLE_ADMIN'],userRole:userRole,children:/*#__PURE__*/_jsx(AdminObroci,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/role\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['ROLE_ADMIN'],userRole:userRole,children:/*#__PURE__*/_jsx(AdminRole,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/korisnici\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['ROLE_ADMIN'],userRole:userRole,children:/*#__PURE__*/_jsx(AdminKorisnici,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/lokacije\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['ROLE_ADMIN'],userRole:userRole,children:/*#__PURE__*/_jsx(AdminLokacije,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/kompanije\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['ROLE_ADMIN'],userRole:userRole,children:/*#__PURE__*/_jsx(AdminKompanije,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/not-authorized\",element:/*#__PURE__*/_jsx(NotAuthorizedPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NePostojiPage,{})})]})});}export default App;","map":{"version":3,"names":["BrowserRouter","Router","Route","Routes","React","useState","useEffect","jwtDecode","HomePage","LoginPage","LozinkaPage","PromenaLozinke","MeniPage","PregledPage","AdminPregled","AdminKorisnici","AdminMeniji","AdminObroci","AdminRole","AdminLokacije","AdminKompanije","NotAuthorizedPage","NePostojiPage","ProtectedRoute","jsx","_jsx","jsxs","_jsxs","App","token","setToken","localStorage","getItem","userRole","setUserRole","savedRole","decoded","role","setItem","e","updateToken","newToken","removeItem","children","path","element","allowedRoles"],"sources":["D:/NARUCIVANJE-FE/src/App.js"],"sourcesContent":["// src/App.js\r\nimport { BrowserRouter as Router, Route, Routes } from \"react-router-dom\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nimport HomePage from \"./pages/HomePage\";\r\nimport LoginPage from \"./pages/LoginPage\";\r\nimport LozinkaPage from \"./pages/LozinkaPage\";\r\nimport PromenaLozinke from \"./pages/PromenaLozinke\";\r\nimport MeniPage from \"./pages/MeniPage\";\r\nimport PregledPage from \"./pages/PregledPage\";\r\nimport AdminPregled from \"./pages/AdminPregled\";\r\nimport AdminKorisnici from \"./pages/AdminKorisnici\";\r\nimport AdminMeniji from \"./pages/AdminMeniji\";\r\nimport AdminObroci from \"./pages/AdminObroci\";\r\nimport AdminRole from \"./pages/AdminRole\";\r\nimport AdminLokacije from \"./pages/AdminLokacije\";\r\nimport AdminKompanije from \"./pages/AdminKompanije\";\r\nimport NotAuthorizedPage from \"./pages/NotAuthorizedPage\";\r\nimport NePostojiPage from \"./pages/NePostojiPage\";\r\nimport ProtectedRoute from \"./components/ProtectedRoute\";\r\n\r\nfunction App() {\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\") || null);\r\n  const [userRole, setUserRole] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const savedRole = localStorage.getItem(\"role\");\r\n    if (savedRole) {\r\n      setUserRole(savedRole);\r\n    } else if (token) {\r\n      try {\r\n        const decoded = jwtDecode(token);\r\n        const role = decoded.role || \"\";\r\n        setUserRole(role);\r\n        localStorage.setItem(\"role\", role);\r\n      } catch (e) {\r\n        setUserRole(\"\");\r\n      }\r\n    } else {\r\n      setUserRole(\"\");\r\n    }\r\n  }, [token]);\r\n\r\n  const updateToken = (newToken) => {\r\n    if (newToken) {\r\n      localStorage.setItem(\"token\", newToken);\r\n    } else {\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"role\");\r\n    }\r\n    setToken(newToken);\r\n  };\r\n\r\n  return (\r\n    <Router>\r\n      <Routes>\r\n        <Route path=\"/\" element={<HomePage />} />\r\n        <Route path=\"/login\" element={<LoginPage updateToken={updateToken} />} />\r\n        <Route path=\"/lozinka\" element={<LozinkaPage />} />\r\n        <Route path=\"/promena-lozinke\" element={<PromenaLozinke />} />\r\n        <Route path=\"/meni\" element={<ProtectedRoute allowedRoles={['ROLE_USER']} userRole={userRole}><MeniPage /></ProtectedRoute>} />\r\n        <Route path=\"/pregled\" element={<ProtectedRoute allowedRoles={['ROLE_USER']} userRole={userRole}><PregledPage /></ProtectedRoute>} />\r\n        <Route path=\"/admin\" element={<ProtectedRoute allowedRoles={['ROLE_ADMIN']} userRole={userRole}><AdminPregled /></ProtectedRoute>} />\r\n        <Route path=\"/admin/meniji\" element={<ProtectedRoute allowedRoles={['ROLE_ADMIN']} userRole={userRole}><AdminMeniji /></ProtectedRoute>} />\r\n        <Route path=\"/admin/obroci\" element={<ProtectedRoute allowedRoles={['ROLE_ADMIN']} userRole={userRole}><AdminObroci /></ProtectedRoute>} />\r\n        <Route path=\"/admin/role\" element={<ProtectedRoute allowedRoles={['ROLE_ADMIN']} userRole={userRole}><AdminRole /></ProtectedRoute>} />\r\n        <Route path=\"/admin/korisnici\" element={<ProtectedRoute allowedRoles={['ROLE_ADMIN']} userRole={userRole}><AdminKorisnici /></ProtectedRoute>} />\r\n        <Route path=\"/admin/lokacije\" element={<ProtectedRoute allowedRoles={['ROLE_ADMIN']} userRole={userRole}><AdminLokacije /></ProtectedRoute>} />\r\n        <Route path=\"/admin/kompanije\" element={<ProtectedRoute allowedRoles={['ROLE_ADMIN']} userRole={userRole}><AdminKompanije /></ProtectedRoute>} />\r\n        <Route path=\"/not-authorized\" element={<NotAuthorizedPage />} />\r\n        <Route path=\"*\" element={<NePostojiPage />} />\r\n      </Routes>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}